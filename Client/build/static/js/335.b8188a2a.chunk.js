"use strict";(self.webpackChunktea_factory_client=self.webpackChunktea_factory_client||[]).push([[335],{1955:function(e,t,n){var r=n(19860),a=n(57829),o=n(46417);t.Z=function(e){var t,n=e.color,i=e.size,s=(0,r.Z)();switch(n){case"secondary":t=s.palette.secondary.main;break;case"error":t=s.palette.error.main;break;case"warning":t=s.palette.warning.main;break;case"info":t=s.palette.info.main;break;case"success":t=s.palette.success.main;break;default:t=s.palette.primary.main}return(0,o.jsx)(a.Z,{sx:{width:i||8,height:i||8,borderRadius:"50%",bgcolor:t}})}},41255:function(e,t,n){n.d(t,{Z:function(){return x}});var r=n(29439),a=n(1413),o=n(47313),i=n(35898),s=n(58359),c=n(34953),l=n.p+"static/media/success.fec2b23f07f1802f3e94.mp3",d=n.p+"static/media/error.68bacdfdbf6f7e34fcd6.mp3",u=n.p+"static/media/info.a800d8f6d77100112d71.mp3",f=n(85876),p=n(46417),h=o.forwardRef((function(e,t){return(0,p.jsx)(c.Z,(0,a.Z)({elevation:6,ref:t,variant:"filled"},e))})),x=(0,o.forwardRef)((function(e,t){var n=o.useState(!1),a=(0,r.Z)(n,2),c=a[0],x=a[1],m=o.useState("success"),Z=(0,r.Z)(m,2),g=Z[0],v=Z[1],b=o.useState("successsful"),j=(0,r.Z)(b,2),y=j[0],S=j[1],_=o.useState(2500),w=(0,r.Z)(_,2),k=w[0],C=w[1],A=(0,o.useState)(new Audio(l)),D=(0,r.Z)(A,1)[0],Y=(0,o.useState)(!1),E=(0,r.Z)(Y,2),V=E[0],M=E[1];(0,o.useEffect)((function(){V?D.play():D.pause()}),[V]),(0,o.useEffect)((function(){return D.addEventListener("ended",(function(){return M(!1)})),function(){D.removeEventListener("ended",(function(){return M(!1)}))}}),[]),o.useEffect((function(){switch(g){case f.z.SUCCESS:D.src!==l&&(D.src=l);break;case f.z.ERROR:D.src!==d&&(D.src=d);break;case f.z.WARNING:case f.z.INFO:D.src!==u&&(D.src=u)}c&&M(!V)}),[c]),(0,o.useImperativeHandle)(t,(function(){return{showAlert:function(e){var t=e.type,n=e.message,r=e.autoHideDuration;x(!0),v(t),S(n),r&&C(r)}}}));var I=function(e,t){"clickaway"!==t&&x(!1)};return(0,p.jsx)(p.Fragment,{children:(0,p.jsx)(i.Z,{spacing:2,sx:{width:"100%"},children:(0,p.jsx)(s.Z,{open:c,autoHideDuration:k,onClose:I,children:(0,p.jsx)(h,{onClose:I,severity:g,sx:{width:"100%"},children:y})})})})}))},85876:function(e,t,n){n.d(t,{V:function(){return a},z:function(){return r}});var r={SUCCESS:"success",ERROR:"error",WARNING:"warning",INFO:"info"},a=Object.freeze({SAVED:"SAVED",CSV:"CSV"})},83953:function(e,t,n){n.r(t),n.d(t,{default:function(){return je}});var r=n(93433),a=n(74165),o=n(15861),i=n(1413),s=n(29439),c=n(47313),l=n(9019),d=n(57829),u=n(35898),f=n(1550),p=n(24631),h=n(61113),x=n(79176),m=n(24193),Z=n(48310),g=n(60194),v=n(37843),b=n(41727),j=n(84060),y=n(77970),S=n(85745),_=n.n(S),w=n(85554),k=n(10658),C=n.n(k),A=n(43394),D=n(72905),Y=n(44948),E=n(40765),V=n(41255),M=n(9478),I=n(47192),P=n(93646),O=n(55630),T=n(85876),R=n(2135),H=n(23477),z=n(24076),F=n(67478),L=n(85281),N=n(51629),W=n(66835),B=n(57861),X=n(90891),U=n(61689),G=n(47131),$=n(16430),q=n(3598),J=n(69888),K=n(91805),Q=(n(1955),n(46417)),ee=[];function te(e,t,n){return t[n]<e[n]?-1:t[n]>e[n]?1:0}function ne(e,t){return"desc"===e?function(e,n){return te(e,n,t)}:function(e,n){return-te(e,n,t)}}function re(e,t){var n=e.map((function(e,t){return[e,t]}));return n.sort((function(e,n){var r=t(e[0],n[0]);return 0!==r?r:e[1]-n[1]})),n.map((function(e){return e[0]}))}var ae=[{id:"employee_id",align:"left",disablePadding:!1,label:"Employee"},{id:"name",align:"left",disablePadding:!0,label:"Name"},{id:"nic",align:"left",disablePadding:!0,label:"NIC"},{id:"designation",align:"left",disablePadding:!1,label:"Designation"},{id:"saved",align:"right",disablePadding:!1,label:"Saved"},{id:"timestamps",align:"right",disablePadding:!1,label:"Timestamps"}];function oe(e){var t=e.order,n=e.orderBy;return(0,Q.jsx)(H.Z,{children:(0,Q.jsx)(z.Z,{children:ae.map((function(e){return(0,Q.jsx)(F.Z,{align:e.align,padding:e.disablePadding?"none":"normal",sortDirection:n===e.id&&t,children:e.label},e.id)}))})})}var ie=function(e){var t=e.tableMode,n=e.handleTimesClick,r=e.hasAttendance,a=(0,c.useState)("asc"),o=(0,s.Z)(a,1)[0],i=(0,c.useState)("trackingNo"),l=(0,s.Z)(i,1)[0],u=(0,c.useState)([]),f=(0,s.Z)(u,1)[0],p=(0,w.v9)((function(e){return e.employees})),h=p.employees,x=p.isLoading;ee=h;return x?(0,Q.jsx)(d.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"center",height:"50vh"},children:(0,Q.jsx)(L.Z,{})}):(0,Q.jsx)(Q.Fragment,{children:(0,Q.jsx)(d.Z,{children:(0,Q.jsx)(N.Z,{sx:{width:"100%",overflowX:"auto",position:"relative",display:"block",maxWidth:"100%","& td, & th":{whiteSpace:"nowrap"}},children:(0,Q.jsxs)(W.Z,{"aria-labelledby":"tableTitle",sx:{"& .MuiTableCell-root:first-of-type":{pl:2},"& .MuiTableCell-root:last-child":{pr:3}},children:[(0,Q.jsx)(oe,{order:o,orderBy:l}),(0,Q.jsx)(B.Z,{children:re(ee,ne(o,l)).map((function(e,a){var o,i=(o=e.trackingNo,-1!==f.indexOf(o)),s="enhanced-table-checkbox-".concat(a);return(0,Q.jsxs)(z.Z,{hover:!0,role:"checkbox",sx:{"&:last-child td, &:last-child th":{border:0}},"aria-checked":i,tabIndex:-1,selected:i,children:[(0,Q.jsx)(F.Z,{component:"th",id:s,scope:"row",align:"left",children:(0,Q.jsx)(X.Z,{color:"secondary",component:R.rU,to:"",children:e.emp_id})}),(0,Q.jsx)(F.Z,{align:"left",children:e.full_name}),(0,Q.jsx)(F.Z,{align:"left",children:e.nic}),(0,Q.jsx)(F.Z,{align:"left",children:e.designation}),(0,Q.jsx)(F.Z,{align:"right",children:(t.CSV?r:e.isAttendanceSaved)?(0,Q.jsx)(U.Z,{title:e.isAttendanceSaved?"Attendace Saved":"Attendance Not Saved",children:(0,Q.jsx)(G.Z,{size:"large",color:"secondary",children:e.isAttendanceSaved?(0,Q.jsx)($.Z,{style:{color:"#23D18B"}}):(0,Q.jsx)(q.Z,{style:{color:"#FFCA28"}})})}):(0,Q.jsx)(U.Z,{title:"No Timestamps found",children:(0,Q.jsx)(J.Z,{})})}),(0,Q.jsx)(F.Z,{align:"right",children:r||e.isAttendanceSaved?(0,Q.jsx)(G.Z,{disabled:t===T.V.SAVED&&!e.isAttendanceSaved,size:"large",color:"secondary",onClick:function(){return t=e.emp_id,void n(t);var t},children:(0,Q.jsx)(K.Z,{style:{color:T.V.SAVED?e.isAttendanceSaved?"#1FA5AC":"FFCA28":"#1FA5AC"}})}):(0,Q.jsx)(U.Z,{title:"No Timestamps found",children:(0,Q.jsx)(J.Z,{})})})]},e._id)}))})]})})})})},se=n(94469),ce=n(33604),le=n(96467),de=n(83929),ue=n(70024),fe=n(4117),pe=n(61851),he=[];function xe(e,t,n){return t[n]<e[n]?-1:t[n]>e[n]?1:0}function me(e,t){return"desc"===e?function(e,n){return xe(e,n,t)}:function(e,n){return-xe(e,n,t)}}function Ze(e,t){var n=e.map((function(e,t){return[e,t]}));return n.sort((function(e,n){var r=t(e[0],n[0]);return 0!==r?r:e[1]-n[1]})),n.map((function(e){return e[0]}))}var ge=[{id:"date",align:"left",disablePadding:!0,label:"Date"},{id:"present",align:"left",disablePadding:!0,label:"Present"},{id:"in",align:"left",disablePadding:!0,label:"In"},{id:"out",align:"left",disablePadding:!0,label:"Out"},{id:"working_h",align:"left",disablePadding:!0,label:"Work H"},{id:"ot_hours",align:"left",disablePadding:!0,label:"OT H"}];function ve(e){var t=e.order,n=e.orderBy;return(0,Q.jsx)(H.Z,{children:(0,Q.jsx)(z.Z,{children:ge.map((function(e){return(0,Q.jsx)(F.Z,{align:e.align,padding:e.disablePadding?"none":"normal",sortDirection:n===e.id&&t,children:e.label},e.id)}))})})}var be=function(e){var t=e.open,n=e.setOpen,r=e.employee,l=e.attendance,u=e.alertRef,h=e.year,x=e.month,Z=e.updateRow,g=e.tableMode,v=((0,w.I0)(),(0,c.useState)("asc")),b=(0,s.Z)(v,1)[0],j=(0,c.useState)("trackingNo"),y=(0,s.Z)(j,1)[0],S=(0,c.useState)([]),_=(0,s.Z)(S,1)[0];he=l;var k=function(){var e=(0,o.Z)((0,a.Z)().mark((function e(){var t,n,o,i;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("=========== saveAttendance"),console.log(l),e.prev=2,e.next=5,O.aX({data:l,employee_ref:r._id,year:h,month:x});case 5:t=e.sent,n=t.data,u.current.showAlert({type:T.z.SUCCESS,message:null===n||void 0===n?void 0:n.message}),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(2),console.log(e.t0),u.current.showAlert({type:T.z.ERROR,message:null===e.t0||void 0===e.t0||null===(o=e.t0.response)||void 0===o||null===(i=o.data)||void 0===i?void 0:i.message});case 14:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(){return e.apply(this,arguments)}}();return(0,Q.jsxs)(se.Z,{fullWidth:!0,maxWidth:"lg",minwidth:"lg",open:t,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",disableEscapeKeyDown:!0,children:[(0,Q.jsxs)(ce.Z,{id:"alert-dialog-title",style:{fontWeight:"bold",fontSize:"13pt"},children:["Reviewing Timestamps of ","".concat(null===r||void 0===r?void 0:r.full_name," (ID: ").concat(null===r||void 0===r?void 0:r.emp_id," | ").concat(h,"-").concat(x,")")]}),(0,Q.jsx)(le.Z,{children:(0,Q.jsx)(M.Z,{sx:{mt:2},content:!1,children:(0,Q.jsx)(d.Z,{children:l&&(0,Q.jsx)(N.Z,{sx:{width:"100%",overflowX:"auto",position:"relative",display:"block",maxWidth:"100%","& td, & th":{whiteSpace:"nowrap"}},children:(0,Q.jsxs)(W.Z,{"aria-labelledby":"tableTitle",sx:{"& .MuiTableCell-root:first-of-type":{pl:2},"& .MuiTableCell-root:last-child":{pr:3}},children:[(0,Q.jsx)(ve,{order:b,orderBy:y}),(0,Q.jsx)(B.Z,{children:Ze(he,me(b,y)).map((function(e,t){var n,a=(n=e.trackingNo,-1!==_.indexOf(n));"enhanced-table-checkbox-".concat(t);return(0,Q.jsxs)(z.Z,{hover:!0,role:"checkbox",sx:{"&:last-child td, &:last-child th":{border:0}},"aria-checked":a,tabIndex:-1,selected:a,children:[(0,Q.jsx)(F.Z,{align:"left",children:C()(e.date).format("DD/MM/YYYY")}),(0,Q.jsx)(F.Z,{align:"left",style:{color:e.is_present?"green":"tomato"},children:(0,Q.jsx)(f.Z,{children:(0,Q.jsx)(de.Z,{control:(0,Q.jsx)(ue.Z,{defaultChecked:e.is_present,onChange:function(t){Z((0,i.Z)((0,i.Z)({},e),{},{is_present:t.target.checked,emp_id:r.emp_id}))}}),label:e.is_present?"Present":"Absent"})})}),(0,Q.jsx)(F.Z,{align:"left",children:(0,Q.jsx)(f.Z,{variant:"standard",children:(0,Q.jsx)(A._,{dateAdapter:D.y,children:(0,Q.jsx)(pe.j,{label:"In",value:""!==e.in?e.in:"",onChange:function(t){Z((0,i.Z)((0,i.Z)({},e),{},{in:t,emp_id:r.emp_id}))},disabled:!e.is_present,renderInput:function(e){return(0,Q.jsx)(p.Z,(0,i.Z)({},e))}})})})}),(0,Q.jsx)(F.Z,{align:"left",children:(0,Q.jsx)(A._,{dateAdapter:D.y,children:(0,Q.jsx)(pe.j,{label:"out",value:""!==e.in?e.out:"",onChange:function(t){Z((0,i.Z)((0,i.Z)({},e),{},{out:t,emp_id:r.emp_id}))},disabled:!e.is_present,renderInput:function(e){return(0,Q.jsx)(p.Z,(0,i.Z)({},e))}})})}),(0,Q.jsx)(F.Z,{align:"left",children:e.work_hours?e.work_hours:0}),(0,Q.jsx)(F.Z,{align:"left",children:e.ot_hours?e.ot_hours:0})]},e.date)}))})]})})})})}),(0,Q.jsxs)(fe.Z,{children:[(0,Q.jsx)(m.Z,{onClick:k,children:g===T.V.CSV?"Complete Review & Save":"Save changes"}),(0,Q.jsx)(m.Z,{onClick:function(){return n(!1)},autoFocus:!0,children:"Close"})]})]})},je=function(){var e=(0,w.I0)(),t=(0,w.v9)((function(e){return e.employees})),n=t.numberOfPages,S=t.employees,k=(0,c.useState)(0),O=(0,s.Z)(k,2),R=O[0],H=O[1],z=(0,w.v9)((function(e){return R?e.employees.employees.find((function(e){return e._id===R})):null})),F=(0,c.useState)(1),L=(0,s.Z)(F,2),N=L[0],W=L[1],B=(0,c.useState)(!1),X=(0,s.Z)(B,2),U=X[0],G=(X[1],(0,c.useState)(!1)),$=(0,s.Z)(G,2),q=$[0],J=($[1],(0,c.useState)({data:[],fileInfo:{}})),K=(0,s.Z)(J,2),ee=K[0],te=K[1],ne=(0,c.useState)(""),re=(0,s.Z)(ne,2),ae=re[0],oe=re[1],se=(0,c.useRef)(),ce=c.useState(C()()),le=(0,s.Z)(ce,2),de=le[0],ue=le[1],fe=c.useState(T.V.SAVED),pe=(0,s.Z)(fe,2),he=pe[0],xe=pe[1],me=c.useState(),Ze=(0,s.Z)(me,2),ge=Ze[0],ve=Ze[1],je=c.useState(),ye=(0,s.Z)(je,2),Se=ye[0],_e=ye[1],we=(0,c.useState)([]),ke=(0,s.Z)(we,2),Ce=ke[0],Ae=ke[1],De=(0,c.useState)(""),Ye=(0,s.Z)(De,2),Ee=Ye[0],Ve=Ye[1],Me=(0,c.useState)(""),Ie=(0,s.Z)(Me,2),Pe=Ie[0],Oe=Ie[1],Te=(0,c.useState)([]),Re=(0,s.Z)(Te,2),He=Re[0],ze=Re[1],Fe=c.useState(!1),Le=(0,s.Z)(Fe,2),Ne=Le[0],We=Le[1],Be=c.useState(""),Xe=(0,s.Z)(Be,2),Ue=Xe[0],Ge=Xe[1],$e=(0,c.useRef)(),qe=(0,c.useState)({year:Se,month:ge}),Je=(0,s.Z)(qe,2),Ke=Je[0],Qe=Je[1];(0,c.useEffect)((function(){for(var t=C()("".concat(Se,"-").concat(ge,"-01")).daysInMonth(),n=[],r=1;r<=parseInt(t);r++){var a=C()("".concat(Se,"-").concat(ge,"-").concat(r)),o=a.startOf("day"),i=a.endOf("day");n.push({start:o,end:i})}Ae(n),Ve(C()("".concat(Se,"-").concat(ge,"-01")).format("YYYY-MM-DD")),Oe(C()("".concat(Se,"-").concat(ge,"-").concat(t)).format("YYYY-MM-DD")),N&&Se&&ge&&e((0,I.zL)(N,C()("".concat(Se,"-").concat(ge,"-01")).format("YYYY-MM-DD"),C()("".concat(Se,"-").concat(ge,"-").concat(t)).format("YYYY-MM-DD")))}),[ge,Se]),(0,c.useEffect)((function(){var e=C()(),t=C()(e);ue(C()(t).format()),ve(C()(t).month()+1),_e(C()(t).year()),Qe((0,i.Z)((0,i.Z)({},Ke),{},{month:C()(t).month()+1,year:C()(t).year()}))}),[]),(0,c.useEffect)((function(){N&&Se&&ge&&e((0,I.zL)(N,Ee,Pe))}),[N]),(0,c.useEffect)((function(){console.log("tableMode =============> ".concat(he)),N&&Se&&ge&&e((0,I.zL)(N,Ee,Pe)),he===T.V.SAVED?it():he===T.V.CSV&&ze([])}),[he]),(0,c.useEffect)((function(){se.current=ae,et()}),[ae]);var et=function(){ae.trim()?e((0,I.Oy)(ae)):N&&Se&&ge&&e((0,I.zL)(N,Ee,Pe))},tt=function(e){ue(e);var t=C()(e).month()+1;ve(t);var n=C()(e).year();_e(n),Qe((0,i.Z)((0,i.Z)({},Ke),{},{year:n,month:t}))},nt=function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function rt(e,t){return at.apply(this,arguments)}function at(){return(at=(0,o.Z)((0,a.Z)().mark((function e(t,n){var r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=0;case 1:if(!(r<t.length)){e.next=7;break}return e.next=4,n(t[r],r,t);case 4:r++,e.next=1;break;case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ot=function(){var e=(0,o.Z)((0,a.Z)().mark((function e(){var t,n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],xe(T.V.CSV),console.log("datesInMonth ======> ".concat(ge)),console.log(Ce),S.map((function(e){var n={emp_id:e.emp_id,dates:[]};ee.data.map((function(t){t[0].toString()===e.emp_id&&n.dates.push(t[1])})),t.push(n)})),n=[],e.next=8,rt(S,function(){var e=(0,o.Z)((0,a.Z)().mark((function e(r,i){var s,c;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=t.filter((function(e){return e.emp_id===r.emp_id})),c={emp_id:r.emp_id,dates:[]},e.next=4,rt(Ce,function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t,n){var r,o,i,l,d,u,f,p,h;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((r=s[0].dates.filter((function(e){return C()(e).isBetween(t.start,C()(t.end))}))).length>0)){e.next=18;break}if(2!==r.length){e.next=15;break}return o="",i="",C()(r[0]).isBefore(C()(r[1]))?(o=r[0],i=r[1]):(o=r[1],i=r[0]),e.next=8,st(t.start,o,i);case 8:l=e.sent,d=l.totalNormalWH,u=l.totalOTHours,f={date:C()(t.start).format("YYYY-MM-DD"),is_present:!0,in:o,out:i,work_hours:d,ot_hours:u},c.dates.push(f),e.next=16;break;case 15:1===r.length&&(p={date:C()(t.start).format("YYYY-MM-DD"),is_present:!0,in:r[0],out:"",work_hours:0,ot_hours:0},c.dates.push(p));case 16:e.next=20;break;case 18:h={date:C()(t.start).format("YYYY-MM-DD"),is_present:!1,in:"",out:"",work_hours:0,ot_hours:0},c.dates.push(h);case 20:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 4:n.push(c);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 8:ze(n),console.log("attendance"),console.log(n);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,c.useEffect)((function(){he===T.V.SAVED&&it()}),[S]);var it=function(){var e=S.map((function(e){return{emp_id:e.emp_id,dates:e.attendance}}));ze(e)},st=function(e,t,n){return new Promise((function(r,a){try{var o=C()(e).format("YYYY-MM-DD"),i=C()("".concat(o," ").concat(C()(t).format("HH:mm:ss"))),s=C()("".concat(o," ").concat(C()(n).format("HH:mm:ss"))),c=C()("".concat(o," 8:00")),l=C()("".concat(o," 17:00")),d=c.diff(i,"hour",!0).toFixed(2);d=d<0?0:d,console.log("morning OT: ".concat(d));var u=s.diff(l,"hour",!0).toFixed(2);u=u<0?0:u,console.log("evening OT: ".concat(u));var f=s.diff(i,"hour",!0).toFixed(2);console.log("total Hours: ".concat(f));var p=parseFloat(d)+parseFloat(u);console.log("total OT Hours: ".concat(p));var h=parseFloat(f)-p;console.log("total Normal W-Hours: ".concat(h)),r({totalNormalWH:h,totalOTHours:p})}catch(x){a(x)}}))},ct=function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){var n,o,i,s,c,l,d,u,f,p;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("================= attendanceObj"),console.log(t),console.log("================= attendance list"),console.log(He),n=He.findIndex((function(e){return e.emp_id===t.emp_id})),o=He.at(n).dates,console.log("================= dates"),console.log(o),i=He.at(n).dates.findIndex((function(e){return e.date===t.date})),s=He.at(n).dates.at(i),c=o.filter((function(e){return e.date!==s.date})),console.log("================= filteredDates"),console.log(c),console.log("================= attendanceDate"),console.log(s),s.is_present=t.is_present,s.work_hours=0,s.ot_hours=0,t.is_present){e.next=23;break}s.in=0,s.out=0,e.next=33;break;case 23:if(s.in=t.in,s.out=t.out,""===t.in||""===t.out){e.next=33;break}return e.next=28,st(t.date,s.in,s.out);case 28:l=e.sent,d=l.totalNormalWH,u=l.totalOTHours,s.work_hours=d,s.ot_hours=u;case 33:f={emp_id:t.emp_id,dates:[].concat((0,r.Z)(c),[s])},console.log("====================== updatedAttendanceObj"),console.log(f),f.dates.sort((function(e,t){return new Date(e.date)-new Date(t.date)})),p=He.map((function(e){return e.emp_id===t.emp_id?f:e})),ze(p),console.log("====================== newList"),console.log(p);case 41:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,Q.jsxs)(l.ZP,{container:!0,rowSpacing:4.5,columnSpacing:2.75,children:[(0,Q.jsx)(l.ZP,{item:!0,xs:12,md:5,lg:4,children:(0,Q.jsxs)(M.Z,{sx:{mt:2},content:!0,children:[(0,Q.jsx)(d.Z,{sx:{p:2,pb:0}}),(0,Q.jsx)("form",{noValidate:!0,onSubmit:nt,children:(0,Q.jsxs)(l.ZP,{container:!0,spacing:3,children:[(0,Q.jsx)(l.ZP,{item:!0,xs:12,children:(0,Q.jsx)(u.Z,{spacing:1,children:(0,Q.jsx)(f.Z,{variant:"standard",children:(0,Q.jsx)(A._,{dateAdapter:D.y,children:(0,Q.jsx)(Y.M,{views:["year","month"],label:"Year and Month",minDate:C()("2012-03-01"),maxDate:C()("2060-06-01"),value:de,onChange:tt,renderInput:function(e){return(0,Q.jsx)(p.Z,(0,i.Z)((0,i.Z)({},e),{},{helperText:null}))}})})})})}),(0,Q.jsx)(l.ZP,{item:!0,xs:12,children:(0,Q.jsx)(u.Z,{spacing:1,children:(0,Q.jsx)(_(),{cssClass:"react-csv-input",label:"Select CSV with secret Death Star statistics",onFileLoaded:function(e,t){te({data:e,fileInfo:t})},parserOptions:{header:!1,dynamicTyping:!0,skipEmptyLines:!0},inputStyle:{color:"blue"}})})}),(0,Q.jsx)(l.ZP,{item:!0,xs:12,children:U&&(0,Q.jsxs)(d.Z,{sx:{width:"100%",marginTop:"10px"},children:[(0,Q.jsx)(h.Z,{children:q}),(0,Q.jsx)(x.Z,{})]})}),(0,Q.jsx)(l.ZP,{item:!0,xs:12,md:12,children:(0,Q.jsx)(P.Z,{children:(0,Q.jsx)(m.Z,{disableElevation:!0,disabled:U,fullWidth:!0,size:"large",type:"reset",variant:"contained",color:"primary",onClick:ot,children:"Calculate"})})})]})})]})}),(0,Q.jsxs)(l.ZP,{item:!0,xs:12,md:7,lg:8,children:[(0,Q.jsxs)(M.Z,{sx:{mt:2},content:!1,children:[(0,Q.jsx)(Z.Z,{sx:{p:0,"& .MuiListItemButton-root":{py:2}},children:(0,Q.jsxs)(g.ZP,{divider:!0,children:[(0,Q.jsx)(f.Z,{sx:{width:{xs:"60%",md:"60%"}},children:(0,Q.jsx)(v.Z,{id:"table-search",size:"small",onChange:function(e){return oe(e.target.value)},startAdornment:(0,Q.jsx)(b.Z,{position:"start",sx:{mr:-.5},children:(0,Q.jsx)(E.Z,{})}),"aria-describedby":"header-search-text",inputProps:{"aria-label":"amount"},placeholder:"Search by supplier"})}),(0,Q.jsx)(f.Z,{sx:{m:1},variant:"standard",children:(0,Q.jsx)(A._,{dateAdapter:D.y,children:(0,Q.jsx)(Y.M,{views:["year","month"],label:"Year and Month",minDate:C()("2012-03-01"),maxDate:C()("2060-06-01"),value:de,onChange:tt,renderInput:function(e){return(0,Q.jsx)(p.Z,(0,i.Z)((0,i.Z)({},e),{},{helperText:null}))}})})}),(0,Q.jsx)(f.Z,{children:(0,Q.jsxs)(j.Z,{size:"large","aria-label":"large button group",children:[(0,Q.jsx)(m.Z,{variant:he===T.V.CSV?"contained":"outlined",onClick:function(){return xe(T.V.CSV)},children:"CSV"},"btn_csv"),(0,Q.jsx)(m.Z,{variant:he===T.V.CSV?"outlined":"contained",onClick:function(){return xe(T.V.SAVED)},children:"Saved"},"btn_saved")]})})]})}),(0,Q.jsx)(ie,{tableMode:he,handleTimesClick:function(e){if(he===T.V.CSV){if(He.length<0)return;var t=He.findIndex((function(t){return t.emp_id===e}));Ge(He.at(t).dates)}else{var n=S.find((function(t){return t.emp_id===e}));console.log(S),console.log("=========== selectedEmp ".concat(e)),console.log(n),Ge(n.attendance),console.log(n.attendance)}var r=S.find((function(t){return t.emp_id===e}));H(r._id),We(!0)},hasAttendance:He.length>0}),!ae&&(0,Q.jsxs)(u.Z,{spacing:2,style:{padding:"15px"},children:[(0,Q.jsxs)(h.Z,{children:["Page: ",N," of ",n]}),(0,Q.jsx)(y.Z,{count:n,page:N,onChange:function(e,t){W(t)}})]})]}),(0,Q.jsx)(V.Z,{ref:$e,message:"Successfully saved!"})]}),(0,Q.jsx)(be,{open:Ne,setOpen:We,employee:z,attendance:Ue,alertRef:$e,year:Se,month:ge,updateRow:ct,tableMode:he})]})}},47192:function(e,t,n){n.d(t,{fN:function(){return l},Oy:function(){return u},zL:function(){return d}});var r=n(74165),a=n(15861),o=n(26373),i=n(87755),s=((0,o.xC)({reducer:i.Z}).dispatch,n(18375)),c=n(55630),l=function(e){return function(){var t=(0,a.Z)((0,r.Z)().mark((function t(n){var a,o;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n({type:s.s5}),t.next=4,c.$V(e);case 4:a=t.sent,o=a.data,console.log("====== API CALL:fetchEmployees ======"),n({type:s.vY.FETCH_ALL,payload:o}),n({type:s.cy}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),console.log(t.t0);case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e){return t.apply(this,arguments)}}()},d=function(e,t,n){return function(){var o=(0,a.Z)((0,r.Z)().mark((function a(o){var i,l;return(0,r.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,o({type:s.s5}),r.next=4,c.Xw(e,t,n);case 4:i=r.sent,l=i.data,console.log("====== API CALL:fetchEmployees ======"),o({type:s.vY.FETCH_ALL,payload:l}),o({type:s.cy}),r.next=14;break;case 11:r.prev=11,r.t0=r.catch(0),console.log(r.t0);case 14:case"end":return r.stop()}}),a,null,[[0,11]])})));return function(e){return o.apply(this,arguments)}}()},u=function(e){return function(){var t=(0,a.Z)((0,r.Z)().mark((function t(n){var a,o;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n({type:s.s5}),t.next=4,c.vc(e);case 4:a=t.sent,o=a.data.data,n({type:s.vY.FETCH_BY_SEARCH,payload:o}),n({type:s.cy}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),console.log(t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}()}},55630:function(e,t,n){n.d(t,{$V:function(){return a},HG:function(){return c},Xw:function(){return o},aX:function(){return l},du:function(){return d},vc:function(){return i},xk:function(){return s}});var r=n(33711).Z.create({baseURL:"http://35.209.133.25"});r.interceptors.request.use((function(e){return localStorage.getItem("profile")&&(e.headers.Authorization="Bearer ".concat(JSON.parse(localStorage.getItem("profile")).token)),e}));var a=function(e){return r.get("/employee?page=".concat(e))},o=function(e,t,n){return r.get("/employee/get-with-attendance?page=".concat(e,"&monthStart=").concat(t,"&monthEnd=").concat(n))},i=function(e){return r.post("/employee/search",{search_text:e})},s=function(e){return r.post("/employee/create-account",e)},c=function(e,t){return r.patch("/employee/".concat(e),t)},l=function(e){return r.post("/attendance/add-list",e)},d=function(e){return r.post("/salary/save",e)}}}]);